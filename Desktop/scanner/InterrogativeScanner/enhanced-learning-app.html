<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interrogative Scanner - Enhanced Learning Platform</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            min-height: 100vh;
        }
        .app-container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .learning-header { padding: 20px 0; margin-bottom: 30px; opacity: 0; animation: fadeInUp 0.8s ease-out forwards; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .learning-title {
            font-size: 32px; font-weight: bold;
            background: linear-gradient(45deg, #00d4ff, #00ff88);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .header-actions { display: flex; gap: 15px; }
        .search-button, .filter-button {
            width: 50px; height: 50px; border-radius: 25px;
            background: rgba(0, 212, 255, 0.1); border: 2px solid #00d4ff;
            color: #00d4ff; font-size: 20px; cursor: pointer;
            transition: all 0.3s ease; display: flex; align-items: center; justify-content: center;
        }
        .search-button:hover, .filter-button:hover { background: rgba(0, 212, 255, 0.2); transform: scale(1.1); }
        .featured-banner {
            background: linear-gradient(135deg, #00d4ff20, #00ff8820);
            border: 1px solid #00d4ff; border-radius: 20px; padding: 30px;
            text-align: center; margin-bottom: 40px; opacity: 0;
            animation: fadeInUp 0.8s ease-out 0.2s forwards;
        }
        .banner-icon { font-size: 60px; margin-bottom: 15px; }
        .banner-title { font-size: 28px; font-weight: bold; margin-bottom: 10px; color: #00d4ff; }
        .banner-subtitle { font-size: 16px; color: #cccccc; }
        .category-section { margin-bottom: 40px; opacity: 0; animation: fadeInUp 0.8s ease-out 0.4s forwards; }
        .section-title { font-size: 24px; font-weight: bold; margin-bottom: 20px; color: #ffffff; }
        .category-scroll { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 10px; }
        .category-tab {
            min-width: 140px; padding: 15px 20px; background: #2a2a2a;
            border: 1px solid #444; border-radius: 25px; cursor: pointer;
            transition: all 0.3s ease; text-align: center; animation: pulse 2s infinite;
        }
        .category-tab:hover, .category-tab.selected {
            background: rgba(0, 212, 255, 0.2); border-color: #00d4ff; transform: translateY(-2px);
        }
        .category-tab.selected .category-name { color: #00d4ff; }
        .category-icon { font-size: 24px; margin-bottom: 8px; display: block; }
        .category-name { font-size: 14px; font-weight: 600; color: #ffffff; }
        .learning-card {
            background: linear-gradient(135deg, #1a1a2e, #2a2a3e);
            border: 1px solid #444; border-radius: 20px; padding: 25px;
            margin-bottom: 20px; opacity: 0; transform: scale(0.95);
            animation: scaleIn 0.6s ease-out forwards; transition: all 0.3s ease; cursor: pointer;
        }
        .learning-card:hover {
            transform: scale(1.02); border-color: #00d4ff;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }
        .card-header { display: flex; align-items: flex-start; margin-bottom: 20px; }
        .card-icon { font-size: 40px; margin-right: 15px; }
        .card-info { flex: 1; }
        .card-title { font-size: 20px; font-weight: bold; color: #ffffff; margin-bottom: 8px; }
        .card-description { font-size: 14px; color: #cccccc; line-height: 1.4; }
        .bookmark-button { padding: 8px; cursor: pointer; transition: transform 0.2s ease; }
        .bookmark-button:hover { transform: scale(1.2); }
        .bookmark-icon { font-size: 24px; }
        .card-meta { display: flex; gap: 20px; margin-bottom: 20px; flex-wrap: wrap; }
        .card-difficulty { font-size: 12px; font-weight: 600; padding: 6px 12px; border-radius: 15px; background: #333; }
        .difficulty-advanced { color: #ff6b6b; }
        .difficulty-intermediate { color: #feca57; }
        .difficulty-beginner { color: #00ff88; }
        .card-duration, .card-lessons { font-size: 12px; color: #888; display: flex; align-items: center; gap: 5px; }
        .progress-container { margin-bottom: 20px; }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .progress-label { font-size: 14px; color: #cccccc; }
        .progress-percent { font-size: 14px; font-weight: bold; color: #00d4ff; }
        .progress-bar { height: 8px; background: #333; border-radius: 4px; overflow: hidden; }
        .progress-fill {
            height: 100%; background: linear-gradient(90deg, #00d4ff, #00ff88);
            border-radius: 4px; transition: width 0.5s ease;
        }
        .card-actions {
            display: flex; gap: 15px; padding-top: 20px;
            border-top: 1px solid #333; flex-wrap: wrap;
        }
        .action-button {
            flex: 1; min-width: 100px; padding: 12px 16px;
            background: rgba(0, 212, 255, 0.1); border: 1px solid #00d4ff;
            border-radius: 20px; color: #00d4ff; font-size: 14px;
            font-weight: 600; cursor: pointer; transition: all 0.3s ease; text-align: center;
        }
        .action-button:hover { background: rgba(0, 212, 255, 0.2); transform: translateY(-2px); }
        .tips-section { opacity: 0; animation: slideInUp 0.7s ease-out 0.6s forwards; }
        .tips-scroll { display: flex; gap: 20px; overflow-x: auto; padding-bottom: 10px; }
        .tip-card {
            min-width: 280px; padding: 20px;
            background: linear-gradient(135deg, #1a1a2e, #2a2a3e);
            border-radius: 15px; border-left: 4px solid; cursor: pointer; transition: all 0.3s ease;
        }
        .tip-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3); }
        .tip-title { font-size: 16px; font-weight: bold; margin-bottom: 10px; color: #ffffff; }
        .tip-content { font-size: 14px; color: #cccccc; line-height: 1.4; }
        .search-container { margin-bottom: 30px; opacity: 0; animation: fadeInUp 0.8s ease-out 0.3s forwards; }
        .search-input {
            width: 100%; padding: 15px 20px; background: rgba(255, 255, 255, 0.1);
            border: 1px solid #444; border-radius: 25px; color: #ffffff;
            font-size: 16px; outline: none; transition: all 0.3s ease;
        }
        .search-input:focus { border-color: #00d4ff; box-shadow: 0 0 20px rgba(0, 212, 255, 0.3); }
        .search-input::placeholder { color: #888; }
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.8); z-index: 1000; animation: fadeIn 0.3s ease;
        }
        .modal-content {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #1a1a2e, #2a2a3e); border: 1px solid #00d4ff;
            border-radius: 20px; padding: 30px; max-width: 500px; width: 90%; animation: scaleIn 0.3s ease;
        }
        .modal-title { font-size: 24px; font-weight: bold; color: #00d4ff; margin-bottom: 15px; }
        .modal-text { font-size: 16px; color: #cccccc; line-height: 1.5; margin-bottom: 20px; }
        .modal-buttons { display: flex; gap: 15px; flex-wrap: wrap; }
        .modal-button {
            flex: 1; min-width: 100px; padding: 12px 20px; border: 1px solid #00d4ff;
            border-radius: 25px; background: rgba(0, 212, 255, 0.1); color: #00d4ff;
            font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;
        }
        .modal-button:hover { background: rgba(0, 212, 255, 0.2); }
        .modal-button.cancel { background: rgba(255, 107, 107, 0.1); border-color: #ff6b6b; color: #ff6b6b; }
        .close-button {
            position: absolute; top: 15px; right: 20px; font-size: 24px;
            color: #888; cursor: pointer; transition: color 0.3s ease;
        }
        .close-button:hover { color: #ffffff; }
        
        /* Quiz Styles */
        .quiz-modal { max-width: 700px; width: 95%; }
        .quiz-container { padding: 20px 0; }
        .quiz-header { margin-bottom: 30px; text-align: center; }
        .quiz-title { color: #00d4ff; font-size: 24px; margin-bottom: 15px; }
        .question-counter { color: #cccccc; font-size: 14px; margin-bottom: 10px; display: block; }
        .quiz-question h4 { color: #ffffff; font-size: 18px; margin-bottom: 25px; line-height: 1.5; }
        .quiz-options { display: flex; flex-direction: column; gap: 15px; }
        .quiz-option {
            padding: 15px 20px; background: rgba(255, 255, 255, 0.05);
            border: 2px solid #444; border-radius: 12px; color: #ffffff;
            font-size: 16px; cursor: pointer; transition: all 0.3s ease;
            text-align: left; min-height: 60px; display: flex; align-items: center;
        }
        .quiz-option:hover {
            background: rgba(0, 212, 255, 0.1); border-color: #00d4ff;
            transform: translateX(5px);
        }
        .answer-feedback { text-align: center; padding: 30px 20px; }
        .feedback-icon { font-size: 60px; margin-bottom: 20px; }
        .feedback-icon.correct { color: #00ff88; }
        .feedback-icon.incorrect { color: #ff6b6b; }
        .feedback-title { color: #ffffff; font-size: 24px; margin-bottom: 15px; }
        .feedback-explanation {
            color: #cccccc; font-size: 16px; line-height: 1.6;
            margin-bottom: 25px; padding: 20px; background: rgba(255, 255, 255, 0.05);
            border-radius: 10px; border-left: 4px solid #00d4ff;
        }
        .feedback-buttons { margin-top: 20px; }
        .quiz-results { text-align: center; padding: 20px; }
        .results-header { margin-bottom: 30px; }
        .score-circle {
            width: 120px; height: 120px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 20px; border: 4px solid;
            background: rgba(255, 255, 255, 0.05);
        }
        .score-circle.passed { border-color: #00ff88; color: #00ff88; }
        .score-circle.failed { border-color: #ff6b6b; color: #ff6b6b; }
        .score-percentage { font-size: 28px; font-weight: bold; }
        .results-title { color: #ffffff; font-size: 24px; margin-bottom: 10px; }
        .results-subtitle { color: #cccccc; font-size: 16px; margin-bottom: 30px; }
        .results-details { text-align: left; margin-bottom: 30px; }
        .results-details h4 { color: #00d4ff; margin-bottom: 15px; }
        .result-item {
            display: flex; align-items: center; gap: 10px;
            padding: 10px 15px; margin-bottom: 8px; border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
        }
        .result-item.correct { border-left: 4px solid #00ff88; }
        .result-item.incorrect { border-left: 4px solid #ff6b6b; }
        .result-icon { font-size: 18px; }
        .result-text { color: #cccccc; }
        .results-actions { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; }
        .certificate-btn { background: linear-gradient(45deg, #ffd700, #ffed4e) !important; color: #000 !important; border-color: #ffd700 !important; }
        
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @media (max-width: 768px) {
            .app-container { padding: 15px; }
            .learning-title { font-size: 24px; }
            .banner-title { font-size: 22px; }
            .card-actions { flex-direction: column; }
            .action-button { min-width: auto; }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="learning-header">
            <div class="header-content">
                <h1 class="learning-title">Cybersecurity Learning</h1>
                <div class="header-actions">
                    <button class="search-button" onclick="toggleSearch()">üîç</button>
                    <button class="filter-button" onclick="showFilters()">‚öôÔ∏è</button>
                </div>
            </div>
        </div>

        <div class="search-container" id="searchContainer" style="display: none;">
            <input type="text" class="search-input" placeholder="Search courses..." id="searchInput" oninput="filterCourses()">
        </div>

        <div class="featured-banner">
            <div class="banner-icon">üéì</div>
            <h2 class="banner-title">Master Cybersecurity</h2>
            <p class="banner-subtitle">Learn from experts and protect your digital world</p>
        </div>

        <div class="category-section">
            <h3 class="section-title">Categories</h3>
            <div class="category-scroll" id="categoryScroll"></div>
        </div>

        <div class="cards-section">
            <h3 class="section-title">Featured Courses</h3>
            <div id="learningCards"></div>
        </div>

        <div class="tips-section">
            <h3 class="section-title">Daily Security Tips</h3>
            <div class="tips-scroll" id="tipsScroll"></div>
        </div>
    </div>

    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <h3 class="modal-title" id="modalTitle"></h3>
            <p class="modal-text" id="modalText"></p>
            <div class="modal-buttons" id="modalButtons"></div>
        </div>
    </div>

    <script>
        let selectedCategory = null;
        let bookmarkedCourses = [];
        let completedCourses = [];
        let courseProgress = { 1: 75, 2: 30, 3: 90, 4: 0 };

        const categories = [
            { id: 1, name: 'Phishing', icon: 'üé£', color: '#ff6b6b' },
            { id: 2, name: 'Malware', icon: 'ü¶†', color: '#4ecdc4' },
            { id: 3, name: 'Social Engineering', icon: 'üé≠', color: '#45b7d1' },
            { id: 4, name: 'Network Security', icon: 'üîí', color: '#96ceb4' },
            { id: 5, name: 'Data Protection', icon: 'üõ°Ô∏è', color: '#feca57' },
        ];

        const learningCards = [
            { id: 1, title: 'Advanced Phishing Detection', description: 'Learn to identify sophisticated phishing attempts and protect yourself from email-based attacks.', difficulty: 'Advanced', categoryId: 1, videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ', pdfUrl: 'https://example.com/phishing-guide.pdf', duration: '45 min', lessons: 8, progress: 75, thumbnail: 'üé£', category: 'Phishing' },
            { id: 2, title: 'Malware Analysis Basics', description: 'Understanding different types of malware and how to analyze suspicious files safely.', difficulty: 'Intermediate', categoryId: 2, videoUrl: 'https://www.youtube.com/watch?v=malware123', pdfUrl: 'https://example.com/malware-guide.pdf', duration: '30 min', lessons: 6, progress: 30, thumbnail: 'ü¶†', category: 'Malware' },
            { id: 3, title: 'Social Engineering Defense', description: 'Protect against manipulation tactics and psychological attacks used by cybercriminals.', difficulty: 'Beginner', categoryId: 3, videoUrl: 'https://www.youtube.com/watch?v=social123', pdfUrl: 'https://example.com/social-guide.pdf', duration: '25 min', lessons: 5, progress: 90, thumbnail: 'üé≠', category: 'Social Engineering' },
            { id: 4, title: 'Network Security Fundamentals', description: 'Secure your network infrastructure and understand common network-based attacks.', difficulty: 'Advanced', categoryId: 4, videoUrl: 'https://www.youtube.com/watch?v=network123', pdfUrl: 'https://example.com/network-guide.pdf', duration: '60 min', lessons: 10, progress: 0, thumbnail: 'üîí', category: 'Network Security' }
        ];

        const quickTips = [
            { id: 1, title: 'Password Security', tip: 'Use unique passwords for each account with at least 12 characters including numbers, symbols, and mixed case letters.', color: '#00d4ff' },
            { id: 2, title: 'Email Safety', tip: 'Always verify sender identity before clicking links or downloading attachments from emails.', color: '#00ff88' },
            { id: 3, title: 'Software Updates', tip: 'Keep your operating system and apps updated with the latest security patches to prevent vulnerabilities.', color: '#ff6b6b' },
            { id: 4, title: 'Network Security', tip: 'Use secure Wi-Fi networks and avoid public hotspots for sensitive data transactions.', color: '#4ecdc4' }
        ];

        // Quiz Questions Database
        const quizQuestions = {
            1: [ // Phishing
                {
                    id: 1,
                    question: "What is the most common indicator of a phishing email?",
                    options: [
                        "Urgent language demanding immediate action",
                        "Professional company logo",
                        "Correct spelling and grammar",
                        "Personalized greeting with your name"
                    ],
                    correct: 0,
                    explanation: "Phishing emails often use urgent language to pressure victims into acting quickly without thinking critically."
                },
                {
                    id: 2,
                    question: "Which of these URLs is most likely to be a phishing attempt?",
                    options: [
                        "https://www.amazon.com/login",
                        "https://www.amaz0n-security.com/verify",
                        "https://amazon.com/account",
                        "https://signin.amazon.com"
                    ],
                    correct: 1,
                    explanation: "The URL uses a zero instead of 'o' and includes 'security' to appear legitimate, which are common phishing tactics."
                },
                {
                    id: 3,
                    question: "What should you do if you receive a suspicious email asking for personal information?",
                    options: [
                        "Reply with the requested information",
                        "Click the link to verify it's legitimate",
                        "Delete the email and contact the company directly",
                        "Forward it to your friends to warn them"
                    ],
                    correct: 2,
                    explanation: "Always delete suspicious emails and contact the company through official channels to verify any requests."
                }
            ],
            2: [ // Malware
                {
                    id: 1,
                    question: "What is the primary purpose of ransomware?",
                    options: [
                        "To steal personal information",
                        "To encrypt files and demand payment",
                        "To monitor user activity",
                        "To slow down computer performance"
                    ],
                    correct: 1,
                    explanation: "Ransomware encrypts victim's files and demands payment (ransom) for the decryption key."
                },
                {
                    id: 2,
                    question: "Which file extension is most commonly associated with malware?",
                    options: [
                        ".txt",
                        ".jpg",
                        ".exe",
                        ".pdf"
                    ],
                    correct: 2,
                    explanation: ".exe files are executable programs that can contain malicious code and should be treated with caution."
                },
                {
                    id: 3,
                    question: "What is the best defense against malware?",
                    options: [
                        "Using only free software",
                        "Keeping antivirus updated and avoiding suspicious downloads",
                        "Disabling all security features",
                        "Only using public computers"
                    ],
                    correct: 1,
                    explanation: "Updated antivirus software and careful browsing habits are the best defense against malware."
                }
            ],
            3: [ // Social Engineering
                {
                    id: 1,
                    question: "What is social engineering in cybersecurity?",
                    options: [
                        "Building secure networks",
                        "Manipulating people to divulge confidential information",
                        "Creating social media accounts",
                        "Engineering social applications"
                    ],
                    correct: 1,
                    explanation: "Social engineering involves psychological manipulation to trick people into revealing sensitive information."
                },
                {
                    id: 2,
                    question: "A caller claims to be from IT and asks for your password. What should you do?",
                    options: [
                        "Provide the password since they're from IT",
                        "Ask for their employee ID and verify independently",
                        "Give them a fake password",
                        "Hang up immediately without verification"
                    ],
                    correct: 1,
                    explanation: "Always verify the caller's identity through official channels before sharing any sensitive information."
                },
                {
                    id: 3,
                    question: "What is 'pretexting' in social engineering?",
                    options: [
                        "Sending text messages",
                        "Creating a fabricated scenario to engage victims",
                        "Using proper grammar in emails",
                        "Testing security systems"
                    ],
                    correct: 1,
                    explanation: "Pretexting involves creating a false scenario or identity to build trust and extract information."
                }
            ],
            4: [ // Network Security
                {
                    id: 1,
                    question: "What does WPA3 provide for wireless networks?",
                    options: [
                        "Faster internet speeds",
                        "Better range coverage",
                        "Enhanced security encryption",
                        "More device connections"
                    ],
                    correct: 2,
                    explanation: "WPA3 provides the latest and strongest encryption standard for wireless network security."
                },
                {
                    id: 2,
                    question: "What is a firewall's primary function?",
                    options: [
                        "Speed up internet connection",
                        "Block unauthorized network access",
                        "Increase storage capacity",
                        "Improve graphics performance"
                    ],
                    correct: 1,
                    explanation: "Firewalls monitor and control incoming and outgoing network traffic based on security rules."
                },
                {
                    id: 3,
                    question: "Why should you avoid using public Wi-Fi for sensitive activities?",
                    options: [
                        "It's slower than private networks",
                        "Data can be intercepted by attackers",
                        "It costs money to use",
                        "It drains battery faster"
                    ],
                    correct: 1,
                    explanation: "Public Wi-Fi networks are often unsecured, making it easy for attackers to intercept transmitted data."
                }
            ]
        };

        // Quiz State
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let quizScore = 0;
        let userAnswers = [];

        function toggleBookmark(courseId) {
            if (bookmarkedCourses.includes(courseId)) {
                bookmarkedCourses = bookmarkedCourses.filter(id => id !== courseId);
            } else {
                bookmarkedCourses.push(courseId);
            }
            renderLearningCards();
        }

        function handleCategoryPress(categoryId) {
            selectedCategory = selectedCategory === categoryId ? null : categoryId;
            renderCategories();
            renderLearningCards();
        }

        function handleCardPress(cardId) {
            const course = learningCards.find(c => c.id === cardId);
            if (course) {
                showModal('Learning Module', `${course.title}\n\nDuration: ${course.duration}\nDifficulty: ${course.difficulty}\nProgress: ${courseProgress[cardId] || course.progress}%`, [
                    { text: 'Watch Video', action: () => openVideoPlayer(course) },
                    { text: 'Download PDF', action: () => downloadPDF(course.pdfUrl, course.title) },
                    { text: 'Take Quiz', action: () => openQuiz(course) },
                    { text: 'Cancel', action: closeModal, class: 'cancel' }
                ]);
            }
        }

        function openVideoPlayer(course) {
            closeModal();
            showModal('Video Player', `Opening video for: ${course.title}`, [
                { text: 'Open YouTube', action: () => window.open(course.videoUrl, '_blank') },
                { text: 'Close', action: closeModal, class: 'cancel' }
            ]);
        }

        function downloadPDF(pdfUrl, fileName) {
            closeModal();
            showModal('Download Started', `Downloading ${fileName}...`, [{ text: 'OK', action: closeModal }]);
        }

        function openQuiz(course) {
            closeModal();
            const questions = quizQuestions[course.categoryId || course.id];
            if (questions) {
                startQuiz(course, questions);
            } else {
                showModal('Quiz Not Available', 'Quiz questions are not available for this course yet.', [
                    { text: 'OK', action: closeModal }
                ]);
            }
        }

        function startQuiz(course, questions) {
            currentQuiz = { course, questions };
            currentQuestionIndex = 0;
            quizScore = 0;
            userAnswers = [];
            showQuizQuestion();
        }

        function showQuizQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            const questionNumber = currentQuestionIndex + 1;
            const totalQuestions = currentQuiz.questions.length;
            
            const optionsHTML = question.options.map((option, index) => 
                `<button class="quiz-option" onclick="selectAnswer(${index})">${String.fromCharCode(65 + index)}. ${option}</button>`
            ).join('');

            const modalHTML = `
                <div class="quiz-container">
                    <div class="quiz-header">
                        <h3 class="quiz-title">${currentQuiz.course.title} - Quiz</h3>
                        <div class="quiz-progress">
                            <span class="question-counter">Question ${questionNumber} of ${totalQuestions}</span>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${(questionNumber / totalQuestions) * 100}%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="quiz-question">
                        <h4>${question.question}</h4>
                        <div class="quiz-options">
                            ${optionsHTML}
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('modal').innerHTML = `
                <div class="modal-content quiz-modal">
                    <span class="close-button" onclick="exitQuiz()">&times;</span>
                    ${modalHTML}
                </div>
            `;
            document.getElementById('modal').style.display = 'block';
        }

        function selectAnswer(answerIndex) {
            const question = currentQuiz.questions[currentQuestionIndex];
            const isCorrect = answerIndex === question.correct;
            
            userAnswers.push({
                questionId: question.id,
                selectedAnswer: answerIndex,
                correct: isCorrect,
                explanation: question.explanation
            });

            if (isCorrect) {
                quizScore++;
            }

            // Show answer feedback
            showAnswerFeedback(answerIndex, question);
        }

        function showAnswerFeedback(selectedIndex, question) {
            const isCorrect = selectedIndex === question.correct;
            const feedbackHTML = `
                <div class="answer-feedback">
                    <div class="feedback-icon ${isCorrect ? 'correct' : 'incorrect'}">
                        ${isCorrect ? '‚úÖ' : '‚ùå'}
                    </div>
                    <h4 class="feedback-title">${isCorrect ? 'Correct!' : 'Incorrect'}</h4>
                    <p class="feedback-explanation">${question.explanation}</p>
                    <div class="feedback-buttons">
                        ${currentQuestionIndex < currentQuiz.questions.length - 1 
                            ? '<button class="modal-button" onclick="nextQuestion()">Next Question</button>'
                            : '<button class="modal-button" onclick="showQuizResults()">View Results</button>'
                        }
                    </div>
                </div>
            `;

            document.querySelector('.quiz-container').innerHTML = feedbackHTML;
        }

        function nextQuestion() {
            currentQuestionIndex++;
            showQuizQuestion();
        }

        function showQuizResults() {
            const percentage = Math.round((quizScore / currentQuiz.questions.length) * 100);
            const passed = percentage >= 70;
            
            const resultsHTML = `
                <div class="quiz-results">
                    <div class="results-header">
                        <div class="score-circle ${passed ? 'passed' : 'failed'}">
                            <span class="score-percentage">${percentage}%</span>
                        </div>
                        <h3 class="results-title">${passed ? 'Congratulations!' : 'Keep Learning!'}</h3>
                        <p class="results-subtitle">
                            You scored ${quizScore} out of ${currentQuiz.questions.length} questions correctly
                        </p>
                    </div>
                    
                    <div class="results-details">
                        <h4>Question Review:</h4>
                        ${userAnswers.map((answer, index) => `
                            <div class="result-item ${answer.correct ? 'correct' : 'incorrect'}">
                                <span class="result-icon">${answer.correct ? '‚úÖ' : '‚ùå'}</span>
                                <span class="result-text">Question ${index + 1}: ${answer.correct ? 'Correct' : 'Incorrect'}</span>
                            </div>
                        `).join('')}
                    </div>

                    <div class="results-actions">
                        <button class="modal-button" onclick="retakeQuiz()">Retake Quiz</button>
                        <button class="modal-button" onclick="closeModal()">Continue Learning</button>
                        ${passed ? '<button class="modal-button certificate-btn" onclick="generateCertificate()">üèÜ Get Certificate</button>' : ''}
                    </div>
                </div>
            `;

            document.querySelector('.modal-content').innerHTML = `
                <span class="close-button" onclick="closeModal()">&times;</span>
                ${resultsHTML}
            `;

            // Update course progress if passed
            if (passed) {
                courseProgress[currentQuiz.course.id] = 100;
                if (!completedCourses.includes(currentQuiz.course.id)) {
                    completedCourses.push(currentQuiz.course.id);
                }
                renderLearningCards();
            }
        }

        function retakeQuiz() {
            startQuiz(currentQuiz.course, currentQuiz.questions);
        }

        function generateCertificate() {
            showModal('Certificate Generated!', 
                `Congratulations! You have successfully completed the ${currentQuiz.course.title} quiz with a passing score. Your certificate has been generated.`, 
                [{ text: 'Download Certificate', action: () => alert('Certificate download would be implemented here!') },
                 { text: 'Close', action: closeModal }]
            );
        }

        function exitQuiz() {
            showModal('Exit Quiz', 'Are you sure you want to exit the quiz? Your progress will be lost.', [
                { text: 'Exit Quiz', action: closeModal, class: 'cancel' },
                { text: 'Continue Quiz', action: () => { closeModal(); showQuizQuestion(); } }
            ]);
        }

        function handleTipPress(tipId) {
            const tip = quickTips.find(t => t.id === tipId);
            if (tip) {
                showModal('Security Tip', tip.tip, [{ text: 'Got it!', action: closeModal }]);
            }
        }

        function toggleSearch() {
            const container = document.getElementById('searchContainer');
            const input = document.getElementById('searchInput');
            if (container.style.display === 'none') {
                container.style.display = 'block';
                input.focus();
            } else {
                container.style.display = 'none';
                input.value = '';
                renderLearningCards();
            }
        }

        function showFilters() {
            showModal('Filter Options', 'Choose how to filter your learning content:', [
                { text: 'Show All', action: () => { selectedCategory = null; renderCategories(); renderLearningCards(); closeModal(); } },
                { text: 'Bookmarked Only', action: () => { filterBookmarked(); closeModal(); } },
                { text: 'Completed', action: () => { filterCompleted(); closeModal(); } },
                { text: 'Cancel', action: closeModal, class: 'cancel' }
            ]);
        }

        function filterBookmarked() { renderLearningCards(true); }
        function filterCompleted() { renderLearningCards(false, true); }
        function filterCourses() { renderLearningCards(); }

        function getFilteredCourses(bookmarkedOnly = false, completedOnly = false) {
            const searchQuery = document.getElementById('searchInput').value.toLowerCase();
            return learningCards.filter(course => {
                const matchesSearch = course.title.toLowerCase().includes(searchQuery) || course.description.toLowerCase().includes(searchQuery);
                const matchesCategory = selectedCategory === null || course.categoryId === selectedCategory;
                const matchesBookmark = !bookmarkedOnly || bookmarkedCourses.includes(course.id);
                const matchesCompleted = !completedOnly || completedCourses.includes(course.id);
                return matchesSearch && matchesCategory && matchesBookmark && matchesCompleted;
            });
        }

        function showModal(title, text, buttons) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalText').textContent = text;
            const buttonsContainer = document.getElementById('modalButtons');
            buttonsContainer.innerHTML = '';
            buttons.forEach(button => {
                const btn = document.createElement('button');
                btn.className = `modal-button ${button.class || ''}`;
                btn.textContent = button.text;
                btn.onclick = button.action;
                buttonsContainer.appendChild(btn);
            });
            document.getElementById('modal').style.display = 'block';
        }

        function closeModal() { document.getElementById('modal').style.display = 'none'; }

        function renderCategories() {
            const container = document.getElementById('categoryScroll');
            container.innerHTML = categories.map(category => `
                <div class="category-tab ${selectedCategory === category.id ? 'selected' : ''}" onclick="handleCategoryPress(${category.id})">
                    <span class="category-icon">${category.icon}</span>
                    <span class="category-name">${category.name}</span>
                </div>
            `).join('');
        }

        function renderLearningCards(bookmarkedOnly = false, completedOnly = false) {
            const container = document.getElementById('learningCards');
            const filteredCourses = getFilteredCourses(bookmarkedOnly, completedOnly);
            container.innerHTML = filteredCourses.map((card, index) => `
                <div class="learning-card" style="animation-delay: ${index * 0.1}s" onclick="handleCardPress(${card.id})">
                    <div class="card-header">
                        <span class="card-icon">${card.thumbnail}</span>
                        <div class="card-info">
                            <h4 class="card-title">${card.title}</h4>
                            <p class="card-description">${card.description}</p>
                        </div>
                        <div class="bookmark-button" onclick="event.stopPropagation(); toggleBookmark(${card.id})">
                            <span class="bookmark-icon">${bookmarkedCourses.includes(card.id) ? '‚ù§Ô∏è' : 'ü§ç'}</span>
                        </div>
                    </div>
                    <div class="card-meta">
                        <span class="card-difficulty difficulty-${card.difficulty.toLowerCase()}">${card.difficulty}</span>
                        <span class="card-duration">‚è±Ô∏è ${card.duration}</span>
                        <span class="card-lessons">üìö ${card.lessons} lessons</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-header">
                            <span class="progress-label">Progress</span>
                            <span class="progress-percent">${courseProgress[card.id] || card.progress}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${courseProgress[card.id] || card.progress}%"></div>
                        </div>
                    </div>
                    <div class="card-actions">
                        <button class="action-button" onclick="event.stopPropagation(); openVideoPlayer({id: ${card.id}, title: '${card.title}', videoUrl: '${card.videoUrl}'})">‚ñ∂Ô∏è Watch</button>
                        <button class="action-button" onclick="event.stopPropagation(); downloadPDF('${card.pdfUrl}', '${card.title}')">üìÑ PDF</button>
                        <button class="action-button" onclick="event.stopPropagation(); openQuiz({id: ${card.id}, title: '${card.title}'})">üß† Quiz</button>
                    </div>
                </div>
            `).join('');
        }

        function renderQuickTips() {
            const container = document.getElementById('tipsScroll');
            container.innerHTML = quickTips.map((tip, index) => `
                <div class="tip-card" style="border-left-color: ${tip.color}; animation-delay: ${index * 0.1}s" onclick="handleTipPress(${tip.id})">
                    <h4 class="tip-title">${tip.title}</h4>
                    <p class="tip-content">${tip.tip}</p>
                </div>
            `).join('');
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            renderCategories();
            renderLearningCards();
            renderQuickTips();
        });
    </script>
</body>
</html>
